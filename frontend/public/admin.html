<!DOCTYPE html>
<html lang="pt-PT">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin - Leia Sabores</title>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/react-router-dom@6/dist/umd/react-router-dom.production.min.js"></script>
  <script src="https://unpkg.com/@tanstack/react-query@5/build/umd/index.production.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; }
  </style>
</head>
<body>
  <div id="admin-root"></div>
  
  <script>
    const { useState, useEffect } = React;
    const { createRoot } = ReactDOM;
    
    // Admin Component Simples
    function AdminApp() {
      const [token, setToken] = useState(localStorage.getItem('admin_token') || '');
      const [products, setProducts] = useState([]);
      const [loading, setLoading] = useState(false);
      
      const fetchProducts = async () => {
        setLoading(true);
        try {
          const response = await fetch('https://api.leiasabores.pt/api/products');
          const data = await response.json();
          setProducts(data.data || []);
        } catch (error) {
          console.error('Erro ao carregar produtos:', error);
        }
        setLoading(false);
      };
      
      useEffect(() => {
        fetchProducts();
      }, []);
      
      const handleTokenSave = () => {
        localStorage.setItem('admin_token', token);
        alert('Token salvo com sucesso!');
      };
      
      return React.createElement('div', { className: 'min-h-screen bg-gray-100' },
        // Header
        React.createElement('header', { className: 'bg-white shadow-sm border-b' },
          React.createElement('div', { className: 'max-w-7xl mx-auto px-4 py-4' },
            React.createElement('h1', { className: 'text-2xl font-bold text-gray-900' }, 'Admin - Leia Sabores'),
            React.createElement('p', { className: 'text-gray-600' }, 'Painel de administração')
          )
        ),
        
        // Main Content
        React.createElement('main', { className: 'max-w-7xl mx-auto px-4 py-8' },
          // Token Section
          React.createElement('div', { className: 'bg-white rounded-lg shadow p-6 mb-8' },
            React.createElement('h2', { className: 'text-lg font-semibold mb-4' }, 'Configuração de Token'),
            React.createElement('div', { className: 'flex gap-4' },
              React.createElement('input', {
                type: 'password',
                value: token,
                onChange: (e) => setToken(e.target.value),
                placeholder: 'JWT Token (admin)',
                className: 'flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
              }),
              React.createElement('button', {
                onClick: handleTokenSave,
                className: 'px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700'
              }, 'Salvar Token')
            )
          ),
          
          // Products Section
          React.createElement('div', { className: 'bg-white rounded-lg shadow p-6' },
            React.createElement('div', { className: 'flex justify-between items-center mb-6' },
              React.createElement('h2', { className: 'text-lg font-semibold' }, 'Produtos'),
              React.createElement('div', { className: 'flex gap-2' },
                React.createElement('button', {
                  onClick: fetchProducts,
                  className: 'px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700'
                }, 'Atualizar'),
                React.createElement('button', {
                  className: 'px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700'
                }, 'Novo Produto')
              )
            ),
            
            loading ? 
              React.createElement('div', { className: 'text-center py-8' }, 'Carregando produtos...') :
              React.createElement('div', { className: 'overflow-x-auto' },
                React.createElement('table', { className: 'min-w-full table-auto' },
                  React.createElement('thead', { className: 'bg-gray-50' },
                    React.createElement('tr', {},
                      React.createElement('th', { className: 'px-4 py-2 text-left text-sm font-medium text-gray-700' }, 'Nome'),
                      React.createElement('th', { className: 'px-4 py-2 text-left text-sm font-medium text-gray-700' }, 'Preço'),
                      React.createElement('th', { className: 'px-4 py-2 text-left text-sm font-medium text-gray-700' }, 'Categoria'),
                      React.createElement('th', { className: 'px-4 py-2 text-left text-sm font-medium text-gray-700' }, 'Status'),
                      React.createElement('th', { className: 'px-4 py-2 text-left text-sm font-medium text-gray-700' }, 'Ações')
                    )
                  ),
                  React.createElement('tbody', { className: 'divide-y divide-gray-200' },
                    products.length === 0 ? 
                      React.createElement('tr', {},
                        React.createElement('td', { colSpan: 5, className: 'px-4 py-8 text-center text-gray-500' }, 
                          'Nenhum produto encontrado'
                        )
                      ) :
                      products.map((product, index) => 
                        React.createElement('tr', { key: product.id || index, className: 'hover:bg-gray-50' },
                          React.createElement('td', { className: 'px-4 py-3 text-sm text-gray-900' }, product.name || 'Sem nome'),
                          React.createElement('td', { className: 'px-4 py-3 text-sm text-gray-900' }, `€${(product.price || 0).toFixed(2)}`),
                          React.createElement('td', { className: 'px-4 py-3 text-sm text-gray-600' }, product.category || 'Sem categoria'),
                          React.createElement('td', { className: 'px-4 py-3' },
                            React.createElement('span', { 
                              className: `inline-flex px-2 py-1 text-xs font-semibold rounded-full ${
                                product.inStock ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                              }`
                            }, product.inStock ? 'Ativo' : 'Inativo')
                          ),
                          React.createElement('td', { className: 'px-4 py-3' },
                            React.createElement('div', { className: 'flex gap-2' },
                              React.createElement('button', { 
                                className: 'text-blue-600 hover:text-blue-800 text-sm'
                              }, 'Editar'),
                              React.createElement('button', { 
                                className: 'text-red-600 hover:text-red-800 text-sm'
                              }, 'Excluir')
                            )
                          )
                        )
                      )
                  )
                )
              )
          )
        )
      );
    }
    
    // Render App
    const root = createRoot(document.getElementById('admin-root'));
    root.render(React.createElement(AdminApp));
  </script>
</body>
</html>
